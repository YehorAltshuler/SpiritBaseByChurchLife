---
// Твой текущий компонент (Post.astro или как он называется)
import Layout from '../layouts/Layout.astro';
import type { Post } from '../types';
import Button from './Button.astro';
import ImageCarousel from './Carousel.astro'; // Новый импорт

const { post, backLink = '/' } = Astro.props as { post: Post; backLink?: string; };
const date = new Date(post.timestamp * 1000).toLocaleDateString('ru-RU');

// Разбор изображений (без изменений)
const mediaItems = post.media 
  ? post.media.split(',').map((m) => m.trim()).filter(Boolean) 
  : [];
---

<Layout title={`${post.title} — SpiritBase`}>
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-medium mb-2">{post.title}</h1>
    <time class="text-sm text-text-secondary">{date}</time>
  </header>

  <!-- Карусель с навигацией + пагинацией -->
  {mediaItems.length > 0 && (
    <ImageCarousel images={mediaItems} title={post.title} />
  )}

  <div 
    class="leading-relaxed text-text-secondary dark:text-text-secondary mt-8"
    set:html={post.text.replace(/\n/g, '<br>')}
  />

  <Button href={backLink} class="mt-12 text-center block">
    ← Назад к списку
  </Button>
</Layout>